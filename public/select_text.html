<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
    <style type="text/css">
        .actions {
            display: none;
            position: absolute;
            border: 2px solid #666666;
            direction: rtl;
            float: left;
            background: white;
        }

        .actions button {
            background: #9D9D9C;
            border: 1px solid #3C3C3B;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }

        .actions ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
        }

        .actions ul li {
            float: right;
        }

        .close {
            display: block;
            position: absolute;
            top: -15px;
            left: -15px;
            background: white;
            width: 20px;
            height: 20px;
            border: 2px solid #3C3C3B;
            text-align: center;
            border-radius: 20px;
            color: #3C3C3B;
            cursor: pointer;
        }

        .clear {
            clear: both;
        }

        span.hl { background: yellow; }
    </style>

    <script src="resources/js/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        String.prototype.trim = function () {
            var str = this.replace(/^\s\s*/, ''),
                    ws = /\s/,
                    i = str.length;
            while (ws.test(str.charAt(--i)));
            return str.slice(0, i + 1);
        };

        $(function(){
            var mouseDown, mouseUp;
            $('.content')
                .on('mousedown', function(e) {
                    mouseDown = e;
                })
                .on('mouseup', function(e){
                    mouseUp = e;

                    var selection  = getSelText().trim(),
                        left = Math.ceil((mouseDown.clientX + mouseUp.clientX) / 2 - ($(".actions").width() / 2)),
                        top = Math.min(mouseDown.clientY, mouseUp.clientY) - $(".actions").height() - 20;

                    $(".actions")
                        .css({ top: top + 20, left: left, opacity: 0 })
                        .show()
                        .animate({ top: '-=20px', opacity: 1 }, 100, 'linear');

                    if (selection.length)
                        console.log(selection);
                    else
                        $(".actions").hide();
                });

            $('.actions .close').on('click', function(){
                $('.actions').hide();
            })
        });

        function getSelText() {
            var txt = '';

            if (window.getSelection) {
                txt = window.getSelection().toString();
            }
            else if (document.getSelection) {
                txt = document.getSelection();
            }
            else if (document.selection) {
                txt = document.selection.createRange().text;
            }

            return txt;
        }
    </script>
</head>
<body>

<div class="content">
    <p>Lorem ipsum dolor sit amet, option adipisci mel et, dicta tacimates imperdiet ius no. Alia consequat usu cu, eam te fastidii partiendo liberavisse, omnes audiam sensibus ne ius. Iriure imperdiet temporibus mei no, unum fabellas incorrupte id nec. Cu dicat facete efficiantur nam, nullam phaedrum in sed. Prima forensibus ne per, cum ignota cotidieque ut. Falli accusamus per eu, usu salutandi facilisis no.</p>

    <p>In ocurreret patrioque assentior his, eos voluptua consequat instructior te, qui ut quot sonet placerat. Te omnis falli inermis quo. Melius nusquam mediocrem nec cu, ei mei audire corpora quaestio, id detracto quaerendum usu. Sea ex case vitae partem, eu causae suavitate deterruisset sit, qui doming vocibus reformidans ad.</p>

    <p>Qui etiam eruditi ei, pri id virtute utroque. Ex nam autem ignota. Sea nulla animal facilisi et, odio nihil at nam. Porro torquatos gloriatur mea an, no quas homero mea, est an latine maiestatis.</p>

    <p>Mel et labore feugait, augue melius interesset sea ei, stet iusto elitr id mel. Eu exerci theophrastus vel, partem labores adolescens no nam, eu hinc verterem quo. Ad lorem saperet noluisse vis. Partem prompta molestie est ex.</p>

    <p>Regione vocibus luptatum vix in, harum ocurreret nam ad. Duo falli populo no, vim ex case ipsum appareat. Dolorum aliquando percipitur at eos. Dicant appetere voluptaria ut vim, vim ad molestie voluptatibus. Eum an sonet urbanitas efficiendi. In pro tale alia. Ei est propriae conceptam maiestatis.</p>
</div>

<div class="actions">
    <span class="close">X</span>

    <ul>
        <li><button>הגב</button></li>
        <li> <button>הצע הצעה לשינוי</button></li>
    </ul>

    <div class="clear"></div>
</div>
</body>
</html>